# MWS Cloud Platform Scheduler: –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –í–ú üë®‚Äçüíª


## –ó–∞–¥–∞—á–∞ –ø—Ä–æ–µ–∫—Ç–∞

* –ù–∞–ø–∏—Å–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–ª—É—á–∞–µ—Ç –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≤–≤–æ–¥ –¥–æ–∫—É–º–µ–Ω—Ç—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –í–ú –∏ —Ö–æ—Å—Ç–∞—Ö, –∞ –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≤—ã–≤–æ–¥ –≤—ã–¥–∞—ë—Ç –¥–æ–∫—É–º–µ–Ω—Ç—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON —Å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã–º —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º –í–ú –ø–æ —Ö–æ—Å—Ç–∞–º.


## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ ‚öôÔ∏è
<p align="center">
  <a href="https://go-skill-icons.vercel.app/">
    <img src="https://go-skill-icons.vercel.app/api/icons?i=linux,python,pycharm,docker&theme=dark"/>
  </a>
</p>

## –ü—Ä–∏–º–µ–Ω—ë–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã —Ä–µ—à–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ üöÄ

* –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –∂–∞–¥–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º First-Fit Decreasing –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –í–ú: –∫–∞–∂–¥–∞—è –í–ú —Ä–∞–∑–º–µ—â–∞–µ—Ç—Å—è –Ω–∞ —Ö–æ—Å—Ç–µ, –∫–æ—Ç–æ—Ä—ã–π –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –æ—Ç 80% –∑–∞–≥—Ä—É–∑–∫–∏ (–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º).
* –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ö–æ—Å—Ç–∞ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Ç–µ–∫—É—â–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ (–ø–æ CPU –∏ RAM), –∏ –í–ú —Ä–∞–∑–º–µ—â–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ —Ç–æ–º —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –∑–∞–≥—Ä—É–∑–∫–∞ –ø–æ—Å–ª–µ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –Ω–µ –ø—Ä–µ–≤—ã—à–∞–µ—Ç 100%.
* –ñ–∞–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –±—ã–ª –≤—ã–±—Ä–∞–Ω –∏–∑-–∑–∞ –µ–≥–æ –ø—Ä–æ—Å—Ç–æ—Ç—ã –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –¥–ª—è –∑–∞–¥–∞—á —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

* –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ö–æ—Å—Ç–∞ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø—Ä–æ—Ü–µ–Ω—Ç –∑–∞–≥—Ä—É–∑–∫–∏ —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ calculate_utilization, –∫–æ—Ç–æ—Ä–∞—è —É—á–∏—Ç—ã–≤–∞–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é –∑–∞–≥—Ä—É–∑–∫—É –ø–æ CPU –∏–ª–∏ RAM.
* –ê–ª–≥–æ—Ä–∏—Ç–º —Å—Ç—Ä–µ–º–∏—Ç—Å—è –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –æ—Ç 80% –∑–∞–≥—Ä—É–∑–∫–∏, —á—Ç–æ–±—ã –º–∞–∫—Å–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å "–≥–∞–ª–ª–æ–Ω—ã" (10 –≥–∞–ª–ª–æ–Ω–æ–≤ –ø—Ä–∏ 80% –∑–∞–≥—Ä—É–∑–∫–µ, —Å–æ–≥–ª–∞—Å–Ω–æ —É—Å–ª–æ–≤–∏—é).

* –ê–ª–≥–æ—Ä–∏—Ç–º –∏–∑–±–µ–≥–∞–µ—Ç –Ω–µ–Ω—É–∂–Ω—ã—Ö –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–π –í–ú, —Ä–∞–∑–º–µ—â–∞—è –∏—Ö —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑. –ú–∏–≥—Ä–∞—Ü–∏–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ —Å–ø–∏—Å–æ–∫ failed_allocations, –∏ –∏—Ö –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–∏–Ω–∏–º–∏–∑–∏—Ä—É–µ—Ç—Å—è.
* –û—Ü–µ–Ω–∫–∞ —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏: f(x) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ—Ü–µ–Ω–∫–∏ —Å—Ä–µ–¥–Ω–µ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Ö–æ—Å—Ç–æ–≤. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ–Ω–Ω–æ –æ—Ü–µ–Ω–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è, —Ö–æ—Ç—è —Ç–æ—á–Ω–∞—è —Ä–æ–ª—å.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ üìÇ

–ü—Ä–æ–µ–∫—Ç —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Å–ª–µ–¥—É—é—â–∏—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–∞—Ç–∞–ª–æ–≥–æ–≤ –∏ —Ñ–∞–π–ª–æ–≤:

```
tbank/
‚îú‚îÄ‚îÄ scheduler.py               # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –í–ú
‚îú‚îÄ‚îÄ input.json                 # –ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö (—Ö–æ—Å—Ç—ã –∏ –í–ú, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞–¥–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç—å)
‚îî‚îÄ‚îÄ Dockerfile                 # Dockerfile –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞
``` 


## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ ‚öôÔ∏è

–î–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞, –∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```bash
git clone https://gitlab.atp-fivt.org/it-purple-hack/team198/mts.git
cd mts
```

### –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞ –≤ Docker üê≥

1. –ü–æ—Å—Ç—Ä–æ–π—Ç–µ Docker-–æ–±—Ä–∞–∑:

```bash
docker build -t vm-allocator .
```

3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:

```bash
# –ó–∞–ø—É—Å–∫ —Å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º–∏ —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
docker run vm-allocator

# –ó–∞–ø—É—Å–∫ —Å –ø–µ—Ä–µ–¥–∞—á–µ–π —Ñ–∞–π–ª–∞
docker run -v $(pwd)/input.json:/app/input.json vm-allocator /app/input.json > result.json
```
